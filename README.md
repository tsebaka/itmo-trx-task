# itmo-trx-task

Разведочный анализ выявил ряд заметных отличий между мошенническими и легитимными транзакциями:
Доля мошенничества: Общее количество мошеннических транзакций оказалось небольшим процентом от всех операций (менее 5%, точное значение зависит от выборки). Это типичная ситуация для финансовых транзакций – подавляющее большинство операций законные, что создаёт проблему несбалансированных классов. Тем не менее, даже редкие мошеннические операции наносят значительный ущерб и требуют особого внимания.
Размер транзакции: После конвертации сумм в единую валюту (USD) обнаружено, что мошеннические транзакции в среднем крупнее по сумме, чем легитимные. Медианная сумма мошеннической операции выше, а распределение таких сумм смещено в сторону больших значений. Вероятно, злоумышленники стараются провести как можно более крупные покупки, чтобы максимизировать прибыль, или быстро обналичить средства. Однако наблюдается и двугорбое распределение: часть мошеннических операций – небольшие суммы (возможно, «тестовые» транзакции для проверки карты), и часть – очень крупные покупки. Таким образом, размер платежа можно рассматривать как фактор риска, хотя граница не строгая (есть немало честных операций на крупные суммы и небольших мошеннических).
Валюта и страна: Благодаря объединению с курсами валют стало видно, что транзакции происходят в различных валютах (USD, EUR, GBP, JPY, BRL, NGN, AUD, RUB, SGD, MXN и др.), соответствующих странам клиентов или продавцов. Особый интерес представляет признак is_outside_home_country – показывает, проведена ли операция за пределами страны проживания клиента. Мошеннические транзакции намного чаще оказываются международными: обнаружено, что существенная часть fraud-операций имела is_outside_home_country = True, тогда как большая доля легитимных операций совершалась внутри страны клиента. Иными словами, если карта используется за рубежом или в иностранной валюте, вероятность мошенничества значительно возрастает. Этот вывод согласуется с общепринятой статистикой: хотя международные (кросс-граничные) платежи составляют лишь ~11% от числа транзакций, на них приходится до 63% мошеннических операций с картами
. Физическая удалённость злоумышленника от жертвы и сложности в отслеживании таких операций делают их привлекательными для мошенников.
Присутствие карты и канал: Поле is_card_present указывает, была ли карта физически использована при транзакции. Выяснилось, что подавляющее большинство мошенничеств происходит без физического предъявления карты, т.е. в режиме online/телефонных платежей. Интернет-транзакции (Card-Not-Present) несут намного больший риск, чем транзакции с картой в точке продажи. В нашем наборе почти все случаи is_fraud имели is_card_present = False. То же подтверждает анализ поля channel: операции через веб-сайт более склонны к мошенничеству, чем через мобильное приложение. Это может быть связано с тем, что мобильные приложения часто используют биометрическую аутентификацию и привязаны к устройству пользователя, а в вебе злоумышленнику проще использовать украденные данные.
Категория продавца: Поле vendor_category (например, «Retail», «Food», «Digital Goods» и т.п.) и связанный флаг is_high_risk_vendor показали заметное влияние. Мошеннические транзакции концентрируются в отдельных категориях, считающихся высокорисковыми. К ним можно отнести продавцов цифровых товаров, онлайн-игр, подарочных карт и т.п. – всего того, что легко монетизировать и сложнее отследить. В данных флаг is_high_risk_vendor = True существенно чаще встречается при fraud-операциях, чем при обычных. Это соответствует отраслевым трендам: например, электронные подарочные карты и техника являются одними из самых частых целей мошенников, составляя до 40% мошеннических покупок в e-commerce. Таким образом, категория и конкретный продавец могут служить сигналом риска.
Поведенческие факторы: В наборе присутствуют признаки активности, например last_hour_activity – словарь с количеством транзакций и суммарной их суммой, совершённых тем же клиентом (или по той же карте) за последний час перед данной операцией. Здесь наблюдения неоднозначные. С одной стороны, некоторые мошеннические операции сопровождались необычно высокой скоростью использования карты (много транзакций подряд за короткий период), что может указывать на атаку. С другой стороны, встречаются и добросовестные клиенты с высокой активностью (например, много мелких покупок или автоматических списаний). В целом, резкое отклонение от обычного ритма транзакций для конкретного пользователя – потенциальный индикатор мошенничества. Например, если обычно клиент делает 1-2 покупки в день, а вдруг прошло 20 транзакций за час, стоит обратить внимание. В нашем анализе мы вывели отдельные числовые поля: last_hour_count и last_hour_total для удобства, и заметили, что некоторые fraud-транзакции происходили на фоне всплеска активности по карте. Однако достоверно разделить хорошие и плохие по одному этому признаку трудно – требуется комбинация факторов.
Время и день недели: Также был рассмотрен признак is_weekend (операция совершена в выходной). Явной зависимости мошенничества от выходных/будней не выявлено – мошенники действуют постоянно. Но примечательно, что некоторые типы мошенничеств могут учащаться в праздники или в конце недели, когда пользователи и банки менее бдительны. В нашем месячном срезе данных существенной разницы по дням недели не обнаружено. Временные паттерны могут проявляться на более длинном периоде.
Корреляционный анализ: Построенная корреляционная матрица для количественных признаков (включая бинарные индикаторы, приведённые к 0/1) показала ожидаемые тенденции. Признак is_fraud имеет заметную положительную корреляцию с флагами is_high_risk_vendor и is_outside_home_country (то есть мошенничество часто совпадает с зарубежными транзакциями и рискованными категориями продавцов) и отрицательную корреляцию с is_card_present (мошенничество обычно без карты на руках). Сумма транзакции (amount_usd) тоже слабо положительно коррелирует с мошенничеством – что подтверждает наблюдение о более крупных суммах при fraud, хотя коэффициент корреляции невысокий. Эти корреляции поддерживают выделенные выше инсайты. Мы визуализировали матрицу корреляций через тепловую карту для наглядности и отметили перечисленные взаимосвязи.
Все вышеупомянутые находки позволяют лучше понять профиль мошеннической транзакции в данных: это, как правило, онлайн-покупка на относительно большую сумму, совершённая в иностранной валюте/стране, у продавца из рискованной категории, часто сопровождается аномальной интенсивностью использования карты. Опираясь на эти выводы, были сформированы рекомендации по улучшению продукта и системы обнаружения мошенничества.
Сформулированные гипотезы и рекомендации
На основе полученных аналитических инсайтов предложены следующие гипотезы: Продуктовые гипотезы (для улучшения бизнес-процессов и пользовательского опыта):
Дополнительная верификация для зарубежных операций: Поскольку обнаружено, что большая часть мошенничеств связана с использованием карты за пределами страны клиента, можно внедрить дополнительные меры безопасности для трансграничных платежей. Гипотеза: если при платежах вне домашней страны запрашивать у пользователя дополнительное подтверждение (например, ввод одноразового кода, биометрия или подтверждение в мобильном приложении), это снизит число несанкционированных операций. Данная мера оправдана, учитывая крайне высокий уровень fraud именно в cross-border транзакциях (до 63% мошенничеств приходится на них). Возможно, стоит также предложить клиентам удобный способ сообщать о планируемых поездках (travel notice), чтобы легитимные иностранные покупки не отклонялись, а всё неизвестное – автоматически отмечалось как подозрительное.
Усиление безопасности для онлайн-платежей: Так как мошенники злоупотребляют операциями без присутствия карты (CNP), предлагается усилить защиту именно в онлайновом канале. Гипотеза: внедрение механизма 3-D Secure (например, подтверждение через SMS/Push или использование технологии вроде Mastercard Identity Check) для крупных интернет-покупок и высокорисковых категорий продавцов снизит уровень fraud. Мировая статистика указывает, что более 70% всех потерь от мошенничества приходится на онлайн-транзакции, поэтому даже небольшое улучшение в этом сегменте существенно повлияет на общий уровень мошенничества. Также можно информировать пользователей об опасностях и рекомендовать использовать, например, виртуальные карты для онлайн-шопинга.
Мониторинг аномалий в поведении клиента: Использование анализа активности (как поле last_hour_activity) для продукта: гипотеза состоит в том, что оповещение клиента или временная блокировка при всплеске операций могут предотвратить крупный ущерб. Например, если за короткий промежуток времени по карте идет серия покупок, не характерная для истории клиента, система может приостановить новые списания до получения подтверждения от владельца. Такой «тормоз» в сочетании с уведомлением в приложение позволит вовремя остановить мошенника, но при этом минимизировать неудобства для добросовестных пользователей.
Фокус на высокорисковых категории товаров: Выявлено, что некоторые категории (например, подарочные карты, электроника, онлайн-сервисы) привлекают непропорционально много мошенников. Продуктовая гипотеза: в этих категориях целесообразно внедрить дополнительные лимиты или проверки. Например, можно снизить мгновенно доступные суммы для недавно добавленных карт в таких категориях либо более агрессивно применять алгоритмы скоринга. Также имеет смысл обучать покупателей – показывать предупреждения при покупке gift card онлайн, поясняя риски.
Технические гипотезы (для улучшения системы детектирования мошенничества):
Интеграция признака геолокации и стран: Результаты показывают сильную зависимость мошенничества от того, совпадает ли страна операции со страной клиента. Техническое предложение: интегрировать геолокационные фильтры и признаки mismatched country в модель fraud-детекции. Например, определять страну по IP-адресу или GPS (для мобильного приложения) и сравнивать с billing-адресом клиента; большое расхождение повышает скор мошенточности. Уже сейчас флаг is_outside_home_country даёт ценный сигнал – в модели машинного обучения он наверняка получил бы высокий вес.
Учет времени и частоты транзакций: Признак активности (количество операций за последний час и т.д.) можно развить до системы детектирования аномалий в реальном времени. Техническая гипотеза: внедрив в поток данных модуль, отслеживающий скорость расходов по каждой карте/учетной записи, можно выявлять подозрительные всплески. Например, использование алгоритмов вида moving window count или даже простых правил (N транзакций за M минут) поможет отсеивать ботов, быстро проводящих серию покупок. Этот признак может быть вычислен на лету и подан модели или триггеру правил.
Нормализация сумм и многовалютность: Проведённая унификация сумм к USD показала эффективность – стало проще сравнивать транзакции. Гипотеза для модели: всегда включать нормализованную сумму (например, в USD или в относительных единицах к среднему по стране) в набор признаков, чтобы алгоритм корректно учитывал размер платежа независимо от валюты. Кроме того, можно учитывать экономический контекст: например, очень крупная сумма по меркам страны клиента может указывать на мошенничество, даже если в абсолюте она невелика. Добавление таких признаков (курс валюты, ВВП на душу населения страны и т.п.) может улучшить выявление аномалий.
Модель машинного обучения с расширенным набором признаков: На основании EDA можно предположить, что алгоритмы машинного обучения (например, лес решений, градиентный бустинг или нейросеть) смогут эффективно разделять мошеннические и честные транзакции, если предоставить им выявленные индикаторы: флаги зарубежности, риска продавца, отсутствие карты, а также взаимодействия между ними. Техническая гипотеза: разработав модель с указанными признаками, мы сумеем автоматически блокировать значительную часть мошеннических операций. Предварительно стоит провести отбор признаков и балансировку выборки (например, с помощью SMOTE или настроек порога), учитывая небольшой процент fraud-меток. Также, основываясь на корреляциях, можно создать новые признаки – например, комбинации «зарубеж + большая сумма» или «online + high_risk_vendor», которые потенциально еще более точно ловят мошеннический паттерн.
Каждая из предложенных гипотез требует проверки. В частности, продуктовые изменения можно протестировать через A/B тесты или анализ динамики fraud-rate после внедрения. Технические решения следует валидировать на отложенной выборке данных, измеряя метрики модели (precision, recall, F1 и т.д.) до и после добавления новых факторов.
